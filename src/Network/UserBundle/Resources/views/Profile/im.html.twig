{% extends "NetworkWebBundle:Default:profile.base.html.twig" %}
{% trans_default_domain 'FOSUserBundle' %}
{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/sonataadmin/vendor/jqueryui/themes/base/jquery-ui.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/sonatacore/vendor/select2/select2.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/sonataformatter/markitup/skins/sonata/style.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/sonataformatter/markitup/sets/markdown/style.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/networkweb/css/horizontal-menu.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/networkweb/css/im_preview.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/networkweb/js/bluebird.js') }}"></script>
    <script src="{{ asset('bundles/sonatacore/vendor/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ asset('bundles/sonataadmin/vendor/jqueryui/ui/minified/jquery-ui.min.js') }}"></script>
    <script src="{{ asset('bundles/networkweb/js/datepicker.js') }}"></script>
    <script src="{{ asset('bundles/networkweb/js/im.js') }}"></script>
    <script src="{{ asset('bundles/sonatacore/vendor/select2/select2.js') }}"></script>
    <script src="{{ asset('bundles/networkweb/js/jquery.slimscroll.js') }}"></script>
    <script src="{{ asset('bundles/networkweb/js/moment.js') }}"></script>
    <script src="{{ asset('bundles/networkweb/js/im_preview.js') }}"></script>

    <script src="{{ asset('bundles/sonataformatter/vendor/markitup-markitup/markitup/jquery.markitup.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/sonataformatter/markitup/sets/markdown/set.js') }}" type="text/javascript"></script>
{% endblock %}
{% block right_content %}
    <style>
        #post-header {
            margin-top: 8px;
            margin-bottom: 4px;
            font-size: small;
        }
        #post-header > #author {
            width: 80%;
            font-weight: bold;
            float: left;
        }
        #post-header > #ts {
            overflow: hidden;
            width: 20%;
        }
        #post-body {
            white-space: pre;
            overflow-wrap: break-word;
        }
        .extended-select {
            width:40%;
        }
        #post-text {
            width:100%;
        }
        .unread-post {
            background: #cee2d3;
        }
        .inline-block {
            display: inline-block;
        }
        #tabs-list li .ui-icon-close {
            float: left;
            cursor: pointer;
        }
        #tabs-list li a {
            float: left;
        }
        .selected-thread {
            background: #46ead6;
        }

    </style>
    <div id="post" style="display: none;">
        <div id="post-header" style="display: none;">
            <a id="author"></a>
            <div id="ts"></div>
        </div>
        <div id="post-body" style="display: none; margin-left: 8px; font-size: small;">
        </div>
        <div id="post-edit" style="display: none; margin-left: 8px; font-size: small;">
            <div id="form-edit" class="markItUp markdown" style="margin-top: 4px;">
                 <textarea id="edit" cols="80" rows="10"></textarea>
            </div>
        </div>
    </div>
    <div id="thread-preview" style="display: none;">
        <a id="user" href="" style="display:inline-block;"></a>
        <div id="topic" style="display:inline-block;"></div>
        <input id="open-thread" type="button" class="blue_button" value="Show Thread" style="display:inline-block;"/>
        <div id="unreadPosts" style="display:inline-block;"></div>
    </div>
    <div id="im-menu" class="horizontal-menu" style="display:block;">
        <ul>
            <li id="show-thread-list">
                <a>{{ 'IM.show.thread_list' | trans }}</a>
            </li>
            <li id="show-opened-threads" style="display: none;">
                <a>{{ 'IM.opened.threads' | trans }}</a>
            </li>
            <li id="im-menu-actions" style="display: none;">
                <a>{{ 'im.actions' | trans }}</a>
                <ul>
                    <li id="add-user-action">
                        <a>{{ 'conference.add.user' | trans }}</a>
                    </li>
                    <li id="kick-user-action">
                        <a>{{ 'conference.kick.user' | trans }}</a>
                    </li>
                    <li id="new-topic-action">
                        <a>{{ 'conference.new_topic' | trans }}</a>
                    </li>
                    <li id="leave-conference-action">
                        <a>{{ 'conference.leave' | trans }}</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div>
        <div>
            <div id="add-user-wrapper" style="display:none;">
                <input id="add-user-list" class="extended-select"/>
                <input type="button" class="blue_button inline-block" id="add-user-apply" value="{{ 'IM.add.user' | trans }}"/>
                <span class='ui-icon ui-icon-close inline-block' role='presentation' id="add-user-cancel">{{ 'IM.add.user.cancel' | trans }}</span>
            </div>
            <div id="kick-user-wrapper" class="vdolgah_wrapper" style="display:none;">
                <input id="kick-user-list" class="extended-select"/>
                <input type="button" class="blue_button inline-block" id="kick-user-apply" value="{{ 'IM.kick.user' | trans }}"/>
                <span class='ui-icon ui-icon-close inline-block' role='presentation' id="kick-user-cancel">{{ 'IM.kick.user.cancel' | trans }}</span>
            </div>
            <div id="new-topic-wrapper" class="vdolgah_wrapper" style="display:none;">
                <input id="new-topic-field"/>
                <input type="button" class="blue_button inline-block" id="new-topic-apply" value="{{ 'IM.new_topic.apply' | trans }}" />
                <span class='ui-icon ui-icon-close inline-block' role='presentation' id="new-topic-cancel">{{ 'IM.new_topic.cancel' | trans }}</span>
            </div>
            <div id="thread-list-wrapper" class="vdolgah_wrapper">
                <h1>Threads</h1>
                <input type="button" class="blue_button" id="compose-post" value="Compose Message"/>
                <div id="thread-list">
                </div>
            </div>
            <div id="thread-tabs" class="horizontal-menu" style="display: none;">
                <ul id="tabs-list" style="z-index: 99;">
                    <!--<li><a>opened thread 1</a></li>-->
                </ul>
            </div>
            <div id="posts-wrapper" class="vdolgah_wrapper" style="display:none;">
                <div id="posts">
                </div>
        <div id="tabs_preview" class="tabs_container">
          <ul class="tabs">
            <li class="inl-bl active">Write</li>
            <li class="inl-bl">Preview</li>
          </ul>
          <div class="tab_container" style="display: block;">
                <div id="post-form" class="markItUp markdown" style="margin-top: 4px;">
                    <textarea id="post-text" cols="80" rows="10"></textarea>
                    <div id="custom-recipient" style="display: none;">
                        <label for="recipient">{{ 'IM.recipient' | trans}}</label>
                        <input id="recipient" class="extended-select"/>
                    </div>
                    <div id="conference-topic-div" style="display: none;">
                        <label for="conference-topic">{{ 'conference.topic' | trans }}</label>
                        <input type="text" id="conference-topic"/>
                    </div>
                </div>
         </div>
        <div class="tab_container">
          <div id="edit-text">
          </div>
        </div>
           <input type="button" class="blue_button" id="send" value="{{ 'IM.send' | trans }}"/>
    </div>
    <div id="dialog-leave-conference-confirm" style="width:700px;" title="{{ 'IM.leave.conference.confirm.title' | trans}}"
            yes="{{ 'IM.leave.conference.confirm.yes' | trans }}"
            no="{{ 'IM.leave.conference.confirm.no' | trans  }}">
        <p>
            <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
            {{ 'IM.leave.conference.confirm.text' | trans }}
        </p>
    </div>

            
    </div>
    </div></div>

<script>

        $(function(){
            {% if partnerId is null or partnerName is null %}
                InitIM(null, null);
            {% else %}
                InitIM({{ partnerId }}, "{{ partnerName }}");
            {% endif %}
        })
    </script>
{% endblock %}
